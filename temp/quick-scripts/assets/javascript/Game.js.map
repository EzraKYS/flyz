{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","textFrame","default","type","Prefab","normalButton","onLoad","part1","find","part2","options","textFrameContent","normalButtonContent","fuck","actionType","active","anim","getComponent","Animation","on","stopAnim","play","data","self","loader","loadRes","err","res","selectKey","key","log","item","json","indexOf","s","item2","node1","instantiate","parent","rithText","getChildByName","RichText","string","content","buttons","removeAllChildren","split","node2","v","once","e","next","onSelectKey","node","backToIndex","openOption","animState","wrapMode","WrapMode","Normal","closeOption","Reverse","start","director","loadScene","off"],"mappings":"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","file":"Game.js","sourceRoot":"../../../../assets/javascript","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n\t\ttextFrame: {\r\n\t\t  default: null,\r\n\t\t  type: cc.Prefab,\r\n\t\t},\r\n\t\tnormalButton: {\r\n\t\t  default: null,\r\n\t\t  type: cc.Prefab,\r\n\t\t},\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\t\tthis.part1 = cc.find(\"Canvas/switching/part1\");\r\n\t\tthis.part2 = cc.find(\"Canvas/switching/part2\");\r\n\t\tthis.options = cc.find(\"Canvas/Options\");\r\n\t\tthis.textFrameContent = cc.find(\"Canvas/GUI/Middle/view/content\");\r\n\t\tthis.normalButtonContent = cc.find(\"Canvas/GUI/Bottom/scrollview/view/content\");\r\n\t\tthis.fuck = \"1-1-1-text\";\r\n\t\tthis.actionType == -1;\r\n\t\tthis.part2.active = true;\r\n\t\tvar anim = this.part2.getComponent(cc.Animation);\r\n\t\tthis.actionType = 0;\r\n\t\tanim.on('finished',this.stopAnim,this);\r\n\t\tanim.play('switching2');\r\n\t\tthis.data = null;\r\n\t\t\r\n\t\tvar self = this;\r\n\t\tcc.loader.loadRes('game', function( err, res)\r\n\t\t{\r\n\t\t\tif (err) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tself.data = res;\r\n\t\t\tself.selectKey(self.fuck);\r\n\t\t});\r\n\t},\r\n\tselectKey : function (key) {\r\n\t\tcc.log(\"selectKey=\" + key);\r\n\t\tvar self = this;\r\n\t\tfor(var item in this.data)\r\n\t   { \r\n\t\t\tvar json = this.data[item];\r\n\t\t\tif (json.key == key) {\r\n\t\t\t\tif (json.key.indexOf(\"text\") != -1) {\r\n\t\t\t\t\tlet node1 = cc.instantiate(this.textFrame);\r\n\t\t\t\t\tnode1.parent = this.textFrameContent;\r\n\t\t\t\t\tlet rithText = node1.getChildByName(\"richtext\").getComponent(cc.RichText);\r\n\t\t\t\t\trithText.string = json.content;\r\n\t\t\t\t\tif (json.buttons== null) {\r\n\t\t\t\t\t\tnode1.getChildByName(\"button\").getChildByName(\"label\").getComponent(cc.RichText).string = \"下一个事件\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.normalButtonContent.removeAllChildren();\r\n\t\t\t\t\t\tfor (var s in json.buttons.split(\",\")) {\r\n\t\t\t\t\t\t\tfor(var item2 in this.data)\r\n\t\t\t\t\t\t   {\r\n\t\t\t\t\t\t\t\tif (this.data[item2].key == json.buttons.split(\",\")[s]) {\r\n\t\t\t\t\t\t\t\t\tlet node2 = cc.instantiate(this.normalButton);\r\n\t\t\t\t\t\t\t\t\tnode2.parent = this.normalButtonContent;\r\n\t\t\t\t\t\t\t\t\tlet RichText = node2.getChildByName(\"RichText\").getComponent(cc.RichText);\r\n\t\t\t\t\t\t\t\t\tRichText.string = this.data[item2].content;\r\n\t\t\t\t\t\t\t\t\tlet v = item2;\r\n\t\t\t\t\t\t\t\t\tnode2.once('mousedown', function(e){\r\n\t\t\t\t\t\t\t\t\t\tnode1.getChildByName(\"button\").getChildByName(\"label\").getComponent(cc.RichText).string = self.data[v].content;\r\n\t\t\t\t\t\t\t\t\t\tself.selectKey(self.data[v].next);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnode1.getChildByName(\"button\").getChildByName(\"label\").getComponent(cc.RichText).string = \"请做出你的选择…\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (json.key.indexOf(\"end\") != -1) {\r\n\t\t\t\t\tlet node1 = cc.instantiate(this.textFrame);\r\n\t\t\t\t\tnode1.parent = this.textFrameContent;\r\n\t\t\t\t\tlet rithText = node1.getChildByName(\"richtext\").getComponent(cc.RichText);\r\n\t\t\t\t\trithText.string = json.content;\r\n\t\t\t\t\tthis.normalButtonContent.removeAllChildren();\r\n\t\t\t\t\tlet node2 = cc.instantiate(this.normalButton);\r\n\t\t\t\t\tnode2.parent = this.normalButtonContent;\r\n\t\t\t\t\tlet RichText = node2.getChildByName(\"RichText\").getComponent(cc.RichText);\r\n\t\t\t\t\tRichText.string = \"The End…\";\r\n\t\t\t\t\tnode2.once('mousedown', function(e){\r\n\t\t\t\t\t\tself.part1.active = true;\r\n\t\t\t\t\t\tvar anim = self.part1.getComponent(cc.Animation);\r\n\t\t\t\t\t\tself.actionType = 1;\r\n\t\t\t\t\t\tanim.on('finished',self.stopAnim,self);\r\n\t\t\t\t\t\tanim.play('switching1');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t // cc.log(res[item]);//注意：此处的item不是数组项，而是数组项的索引\r\n\t\t  \r\n\r\n\t   }\r\n\t},\r\n\t\r\n\tonSelectKey : function (node, json) {\r\n\t\tnode.getChildByName(\"button\").getChildByName(\"label\").getComponent(cc.RichText).string = json.content;\r\n\t\tthis.selectKey(json.next);\r\n\t},\r\n\t\r\n\tbackToIndex() {\r\n\t\tthis.part1.active = true;\r\n\t\t\t\t\t\t\t\tvar anim = this.part1.getComponent(cc.Animation);\r\n\t\t\t\t\t\t\t\tthis.actionType = 2;\r\n\t\t\t\t\t\t\t\tanim.on('finished',this.stopAnim,this);\r\n\t\t\t\t\t\t\t\tanim.play('switching1');\r\n\t},\r\n\t\r\n\topenOption () {\r\n\t\tthis.options.active = true;\r\n\t\tvar anim = this.options.getComponent(cc.Animation);\r\n\t\tvar animState = anim.play('setting');\r\n\t\tanimState.wrapMode = cc.WrapMode.Normal;\r\n\t},\r\n\t\r\n\tcloseOption () {\r\n\t\tvar anim = this.options.getComponent(cc.Animation);\r\n\t\tthis.actionType = 3;\r\n\t\tanim.on('finished',this.stopAnim,this);\r\n\t\tvar animState = anim.play('setting');\r\n\t\tanimState.wrapMode = cc.WrapMode.Reverse;\r\n\t},\r\n\r\n    start () {\r\n\t\t\r\n    },\r\n\t\r\n\tstopAnim : function () {\r\n\t\tif (this.actionType == 0) {\r\n\t\t\tthis.part2.active = false;\r\n\t\t} else if (this.actionType == 1) {\r\n\t\t\tthis.part1.active = false;\r\n\t\t\tcc.director.loadScene(\"GameOver\");\r\n\t\t} else if (this.actionType == 2) {\r\n\t\t\tthis.part1.active = false;\r\n\t\t\tcc.director.loadScene(\"Index\");\r\n\t\t} else if (this.actionType == 3) {\r\n\t\t\tthis.options.active = false;\r\n\t\t\tvar anim = this.options.getComponent(cc.Animation);\r\n\t\t\tanim.off('finished',  this.stopAnim,    this);\r\n\t\t}\r\n\t\tthis.actionType == -1;\r\n\t},\r\n\r\n    // update (dt) {},\r\n});\r\n"]}